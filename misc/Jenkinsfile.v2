node {
   def commit_id
   stage('Preparation') {
     checkout scm
     sh "git rev-parse --short HEAD > .git/commit-id"
     commit_id = readFile('.git/commit-id').trim()
   } 
   
   stage('test with licensefinder') {
     sh 'docker run -t -d -u 1000:1000 --rm --volumes-from=$HOSTNAME -w ${WORKSPACE} licensefinder/license_finder /bin/bash -lc \'echo $PWD; ls; cd ..; echo $PWD; ls; license_finder\' '
     
     docker.image("licensefinder/license_finder:latest").inside{
         sh '/bin/bash -login'
         sh 'echo ${PWD}'
         sh 'ls'
         sh 'cd ..'
         sh 'echo $PWD'
         sh 'ls'
         sh 'license_finder'
     }
   } 
   
                                      
}                   
